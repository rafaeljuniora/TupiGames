<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <style th:fragment="modal-style">
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div th:fragment="add-modal" id="addModal" class="modal-overlay hidden">
      <div
        class="bg-[#F1F1F1] rounded-b-[45px] rounded-tl-[45px] w-11/12 max-w-md p-6 shadow-lg"
      >
        <div class="flex justify-end items-center mb-6">
          <button class="text-2xl font-bold p-2 cursor-pointer" id="closeModalBtn">&times;</button>
        </div>

        <div>
          <form class="space-y-4">
            <div>
              <input
                type="text"
                placeholder="Nome"
                class="w-full p-4 bg-white rounded-4xl border-1 border-[#CCCCCC] focus:ring-2 focus:ring-gray-200"
              />
            </div>

            <div>
              <input
                type="text"
                placeholder="Sobrenome"
                class="w-full p-4 bg-white rounded-4xl border-1 border-[#CCCCCC] focus:ring-2 focus:ring-gray-200"
              />
            </div>

            <div>
              <input
                type="text"
                placeholder="Data de Nascimento (Senha)"
                class="w-full p-4 bg-white rounded-4xl border-1 border-[#CCCCCC] focus:ring-2 focus:ring-gray-200"
              />
            </div>

            <div class="flex justify-center mt-6">
              <button
                type="submit"
                class="bg-[#FFE889] text-black font-medium px-10 py-3 rounded-full hover:bg-yellow-300"
              >
                Adicionar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script th:fragment="modal-script">
      function setupModal() {
        const modal = document.getElementById("addModal");
        const closeBtn = document.getElementById("closeModalBtn");

        if (!modal || !closeBtn) {
          console.error("Elementos do modal n√£o encontrados");
          return;
        }
        closeBtn.addEventListener("click", function () {
          modal.classList.add("hidden");
        });
        modal.addEventListener("click", function (e) {
          if (e.target === modal) {
            modal.classList.add("hidden");
          }
        });
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape" && !modal.classList.contains("hidden")) {
            modal.classList.add("hidden");
          }
        });
      }
      function checkAndSetupModal() {
        if (document.getElementById("addModal")) {
          setupModal();
        } else {
          setTimeout(checkAndSetupModal, 100);
        }
      }
      document.addEventListener("DOMContentLoaded", checkAndSetupModal);
    </script>
  </body>
</html>
